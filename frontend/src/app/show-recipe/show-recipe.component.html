<div class="container">
  @if (dough()) {
    <mat-card class="card">
      <mat-card-header class="header">
        <mat-card-title>{{ dough()!.name }}</mat-card-title>
        <div class="buttons">
          <button class="button" [routerLink]="['/edit', id, component]">Bearbeiten</button>
          <button class="button" (click)="onPDFClick()">Erstelle PDF</button>
        </div>
      </mat-card-header>
      <mat-card-content>
        @if (doughImage()) {
          <img [src]="doughImage()" [alt]="dough()!.name" class="recipe-image">
        }
        <div class="form-group">
          <label>Das Rezept ergibt ... BÃ¶den</label>
          <input type="number" [(ngModel)]="doughQuantity">
        </div>
        <h4>Zutaten:</h4>
        @for (ingredient of dough()!.ingredients  ; track ingredient) {
          <p>
            {{ (ingredient.quantity/dough()!.quantity)*doughQuantity() }}  {{ ingredient.description }}
          </p>
        }
        <h4>Anleitung:</h4>
        <p class="instructions">{{ dough()!.instructions }}</p>
      </mat-card-content>
    </mat-card>
  }

  @if (filling()) {
    <mat-card class="card">
      <mat-card-header class="header">
        <mat-card-title>{{ filling()!.name }}</mat-card-title>
        <div class="buttons">
          <button class="button" [routerLink]="['/edit', id, component]">Bearbeiten</button>
          <button class="button" (click)="onPDFClick()">Erstelle PDF</button>
        </div>
      </mat-card-header>
      <mat-card-content>
        @if (fillingImage()) {
          <img [src]="fillingImage()" [alt]="filling()!.name" class="recipe-image">
        }
        <div class="form-group">
          <label>Das Rezept ergibt ... Portionen</label>
          <input type="number" [(ngModel)]="fillingQuantity">
        </div>
        <h4>Zutaten:</h4>
        @for (ingredient of filling()!.ingredients; track ingredient) {
          <p>
            {{ (ingredient.quantity/filling()!.quantity)*fillingQuantity() }}  {{ ingredient.description }}
          </p>
        }
        <h4>Anleitung:</h4>
        <p class="instructions">{{ filling()!.instructions }}</p>
      </mat-card-content>
    </mat-card>
  }

  @if (topping()) {
    <mat-card class="card">
      <mat-card-header class="header">
        <mat-card-title>{{ topping()!.name }}</mat-card-title>
        <div class="buttons">
          <button class="button" [routerLink]="['/edit', id, component]">Bearbeiten</button>
          <button class="button" (click)="onPDFClick()">Erstelle PDF</button>
        </div>
      </mat-card-header>
      <mat-card-content>
        @if (toppingImage()) {
          <img [src]="toppingImage()" [alt]="topping()!.name" class="recipe-image">
        }
        <div class="form-group">
          <label>Das Rezept ergibt ... Portionen</label>
          <input type="number" [(ngModel)]="toppingQuantity">
        </div>
        <h4>Zutaten:</h4>
        @for (ingredient of topping()!.ingredients; track ingredient) {
          <p>
            {{ (ingredient.quantity/topping()!.quantity)*toppingQuantity() }} {{ ingredient.description }}
          </p>
        }
        <h4>Anleitung:</h4>
        <p class="instructions">{{ topping()!.instructions }}</p>
      </mat-card-content>
    </mat-card>
  }

  @if (cake()) {
    <mat-card class="card">
      <mat-card-header class="header">
        <mat-card-title>{{ cake()!.name }}</mat-card-title>
        <div class="buttons">
          <button class="button" [routerLink]="['/edit', id, component]">Bearbeiten</button>
          <button class="button" (click)="onPDFClick()">Erstelle PDF</button>
        </div>
      </mat-card-header>
      <mat-card-content>
        @if (cakeImage()) {
          <img [src]="cakeImage()" [alt]="cake()!.name" class="recipe-image">
        }
        <div class="form-group">
          <label>Das Rezept ergibt ... Kuchen</label>
          <input type="number" [(ngModel)]="cakeQuantity" min="1">
        </div>
      </mat-card-content>
      @if (cake()!.instructions =='') {
        <mat-card-content>
          @for (comp of componentsToDisplay(); track comp) {
            <div>
              <h4> {{ comp.name }}</h4>
              @if (comp.image) {
                <img [src]="comp.image" [alt]="comp.name" class="recipe-image">
              }
              @for (ingredient of comp.ingredients; track ingredient) {
                <p>
                  {{ (ingredient.quantity/comp.baseQuantity)*comp.quantity*cakeQuantity() }}  {{ ingredient.description }}
                </p>
              }
              <p class="instructions">{{ comp.instructions }}</p>
            </div>
          }
        </mat-card-content>
      }
      <mat-card-content>
        @if (cake()!.instructions) {
          <div>
            <h4>Zutaten:</h4>
            @for (ingredient of cake()!.ingredients; track ingredient) {
              <p>
                {{ ingredient.quantity*cakeQuantity() }} {{ ingredient.description }}
              </p>
            }
            <h4>Anleitung:</h4>
            <p class="instructions">{{ cake()!.instructions }}</p>
          </div>
        }
      </mat-card-content>
    </mat-card>
  }
</div>

